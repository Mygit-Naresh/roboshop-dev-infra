pipeline {
   agent {
     node {
        label 'jenkins-agent-1'
        }
}
options {
                timeout(time: 1, unit: 'HOURS') 
            }
    stages {
stage('init'){

        steps {
          script {
           sh """
           cd 01-vpc
           terraform init -reconfigure
           """
          }
      }
}
stage('terraform plan'){

        steps {
          script {
           sh """
           cd 01-vpc
           terraform plan
           """
          }
      }
}
stage('terraform approve'){
 input {
                message "Should we continue?"
                ok "Yes, we should."
                submitter "alice,bob"
                parameters {
                    string(name: 'PERSON', defaultValue: 'Mr Jenkins', description: 'Who should I say hello to?')
                }


        steps {
          script {
           sh """
           cd 01-vpc
           terraform apply -auto-approve
           """
          }
      }
    }
}
  }
}